# :books: Directory <sub>디렉터리</sub>

## :bookmark_tabs: 목차

[:arrow_up: **Operating System**](../README.md)

1. ### [Directory](#📕-file-파일)

# :closed_book: Directory <sub>디렉터리</sub>

## 정의

> 파일을 분류하기 위해 사용하는 이름공간<sub>Name Space</sub>

## 특징

- 파일 시스템은 파일과 다른 하부 디렉터리의 연속으로 구성
- 파일과 마찬가지로 고유의 이름과 식별자, 메타데이터를 이용해 식별
- 디렉터리간의 관계 설명을 위해 루트 디렉터리, 부모 디렉터리와 자식 디렉터리로 구분
- 디렉터리는 경로<sub>Path</sub>를 통해 파일 및 하위 디렉터리의 위치를 탐색 및 색인
  - **경로** : 파일이 전체 디렉터리에서 어느 위치에 있는지 문자열로 구성
  - **절대 경로** : 루트 디렉터리를 기준으로 파일의 위치를 나타내는 방식
  - **상대 경로** : 현재 실행 및 탐색 위치를 기준으로 파일의 위치를 나타내는 방식

## 디렉터리의 구조

### 1단계 디렉터리

![img:1단계 디렉터리](../img/file_directory_01.png)

- 가장 단순한 구조로, 모든 파일이 하나의 디렉터리 내에 위치해 관리되는 구조
- 모든 파일이 하나의 디렉터리에 존재하기 때문에 각각의 파일 이름이 달라함
- 파일이나 사용자의 수가 증가하면 파일을 관리하는데에 어려움이 발생
- 파일명은 보통 내용과 관련되어있고, 시스템에 따라 길이에 제한을 받음

### 2단계 디렉터리

![img:2단계 디렉터리](../img/file_directory_02.png)

- 루트는 마스터 파일 디렉터리<sub>Master File Diretory, MFD</sub>이고, 아래로 사용자 파일 디렉터리<sub>User File Diretory, UFD</sub>, 그 아래로 파일로 구성되어 관리되는 구조
- 각 파일은 트리의 리프에 해당
- 사용자 이름과 파일 이름은 루트 디렉터리로부터 리프까지의 경로명으로 정의
- 마스터 파일 디렉터리는 각 사용자 이름, 계정 번호, 사용자 파일 디렉터리를 가리키는 포인터를 갖고 있으며, 사용자 파일 디렉터리를 관리
- 사용자 파일 디렉터리는 한 사용자가 갖고 있는 파일들에 대한 정보를 가지고 있고, 해당 사용자의 파일을 관리
- 동일한 파일 이름이 서로 다른 사용자 파일 디럭터리에 속하는 경우에 사용 가능

### 트리 구조 디렉터리

![img:트리 구조 디렉터리](../img/file_directory_03.png)

- 트리의 형태를 띄는 디렉터리 구조
- 하나의 루트 디렉터리와 여러 개의 서브 디렉터리로 구성
- 각 디렉터리에는 파일과 서브 디렉터리가 존재함
- 트리 구조 디렉터리는 디렉터리의 생성과 제거가 비교적 용이
- 트리 구조 디렉터리에서는 디렉터리간 파일이나 서브 디렉터리의 공유를 불가능
- 디렉터리 탐색은 포인터를 이용하고, 경로명은 절대 경로명과 상대 경로명을 사용

### 비순환 그래프 디렉터리

![img:비순환 그래프 디렉터리](../img/file_directory_04.png)

- 트리 구조 디렉터리를 확장한 구조
- 트리 구조 디렉터리와 달리 디렉터리간에 파일이나 서브 디렉터리의 공유가 가능
- 한 디렉터리에서 공유한 파일이나 폴더에 수정이 일어나면 다른 디렉터리에서도 해당 파일이나 디렉터리의 변화가 적용
- 디렉터리 구조가 복잡하고, 공유된 하나의 파일에 대해 두번 이상 탐색될 수 있기 떄문에 시스템 성능이 낮음
- 한 디렉터리에서 공유된 파일을 삭제할 경우, 고아 포인터가 발생할 수 있음

### 일반 그래프 디렉터리

![img:일반 그래프 디렉터리](../img/file_directory_05.png)

- 트리 구조 디렉터리에 링크를 더해 순환을 허용하는 그래프 디렉터리 구조
- 디렉터리간에 파일이나 서브 디렉터리의 공유가 가능
- 탐색 알고리즘이 간단해 파일과 디렉터리에 대한 엑세스가 간결함
- 링크를 구성하기 위해 참조의 재활용을 위한 가비지 컬렉션을 사용
  - 마지막 참조가 끝났음에도 메모리를 재할당 할 수 있는지를 판별
  - 전 파일 시스템을 탐색해 엑세스 할 수 있는 파일에 표시
  - 재탐색시 탐색에서는 표시하지 않은 메모리를 사용 가능 메모리 리스트에 추가함
